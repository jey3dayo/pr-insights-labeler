# PR Insights Labeler - Recommended Configuration
#
# This is a recommended configuration that includes both basic settings
# and optional features (commented out). Uncomment optional features as needed.

name: PR Insights Labeler

on:
  pull_request:
    types: [opened, synchronize, reopened]

jobs:
  label:
    runs-on: ubuntu-latest

    permissions:
      contents: read # Read PR files
      pull-requests: write # Apply labels
      issues: write # Post comments

    steps:
      - uses: actions/checkout@v4

      - uses: jey3dayo/pr-insights-labeler@v1
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}

          # ============================================
          # Basic Configuration
          # ============================================

          # Size Limits
          file_size_limit: "100KB" # Maximum file size
          file_lines_limit: "500" # Maximum lines per file
          pr_additions_limit: "5000" # Maximum total additions
          pr_files_limit: "50" # Maximum changed files

          # Label Control (Enable/Disable label types)
          size_enabled: "true" # Enable size labels (size/small, size/medium, etc.)
          category_enabled: "true" # Enable category labels (category/tests, category/docs, etc.)
          risk_enabled: "true" # Enable risk labels (risk/high, risk/medium)
          # complexity_enabled: "false" # Enable complexity labels (disabled by default)

          # GitHub Actions Summary
          enable_summary: "true" # Publish metrics to GitHub Actions Summary

          # PR Comments
          comment_on_pr: "auto" # Auto-detect when to comment (auto/always/never)


          # ============================================
          # Optional: Custom Thresholds
          # ============================================
          # Uncomment to customize size label thresholds
          # size_thresholds: '{"small": 100, "medium": 300, "large": 700, "xlarge": 2000}'

          # Uncomment to customize complexity thresholds (requires complexity_enabled: "true")
          # complexity_thresholds: '{"medium": 10, "high": 20}'

          # ============================================
          # Optional: Workflow Quality Gates
          # ============================================
          # Fail workflow if violations are detected
          # Useful for enforcing code quality standards

          # Uncomment to fail if individual files exceed size/line limits
          # fail_on_large_files: "true"

          # Uncomment to fail if too many files are changed
          # fail_on_too_many_files: "true"

          # Uncomment to fail if PR size exceeds threshold
          # Options: small, medium, large, xlarge, xxlarge
          # fail_on_pr_size: "xlarge"

          # ============================================
          # Optional: Label Customization
          # ============================================
          # Customize violation label names
          # large_files_label: "violations/large-files"
          # too_many_files_label: "violations/too-many-files"
          # too_many_lines_label: "violations/too-many-lines"
          # excessive_changes_label: "violations/excessive-changes"

          # Auto-remove labels when limits are no longer exceeded
          # auto_remove_labels: "true"

          # ============================================
          # Optional: Directory-Based Labeling
          # ============================================
          # Apply custom labels based on file paths using glob patterns
          # Requires: .github/directory-labeler.yml configuration file
          # See: https://github.com/jey3dayo/pr-insights-labeler/blob/main/docs/advanced-usage.md#directory-based-labeling

          # enable_directory_labeling: "true"
          # directory_labeler_config_path: ".github/directory-labeler.yml"
          # max_labels: "10"  # Maximum number of labels to apply (0 for unlimited)

          # ============================================
          # Optional: Advanced Exclusion Patterns
          # ============================================
          # Add custom patterns to exclude from analysis
          # additional_exclude_patterns: |
          #   **/*.generated.ts
          #   **/*.gen.go
          #   coverage/**
          #   **/*.min.js

          # Disable default exclude patterns (not recommended)
          # use_default_excludes: "false"

          # ============================================
          # Optional: Multi-language Support
          # ============================================
          # Set output language (en/ja)
          # language: "en"  # English (default)
          # language: "ja"  # Japanese

          # ============================================
          # Optional: Skip Draft PRs
          # ============================================
          # Skip labeling for draft PRs
          # skip_draft_pr: "true"  # Default: true
# ============================================
# Tips and Best Practices
# ============================================
#
# 1. Start Simple:
#    Begin with the basic configuration and enable optional features as needed.
#
# 2. Customize Thresholds:
#    Adjust size_thresholds based on your team's PR size preferences.
#
# 3. Enable Quality Gates Gradually:
#    Start with fail_on_pr_size and add stricter checks over time.
#
# 4. Use Directory-Based Labeling:
#    Create .github/directory-labeler.yml to automatically label PRs by area.
#
# 5. Localization:
#    Set language: "ja" for Japanese output or use LANGUAGE env variable.
#
# 6. For Open Source Projects:
#    Avoid strict quality gates (fail_on_*) to encourage contributions.
#
# 7. For Fork PRs:
#    Use pull_request_target event. See examples/workflows/fork-friendly.yml
#
# ============================================
# Related Documentation
# ============================================
#
# Configuration Guide: https://github.com/jey3dayo/pr-insights-labeler/blob/main/docs/configuration.md
# Advanced Usage: https://github.com/jey3dayo/pr-insights-labeler/blob/main/docs/advanced-usage.md
# Example Workflows: https://github.com/jey3dayo/pr-insights-labeler/tree/main/examples/workflows
